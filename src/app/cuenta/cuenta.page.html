<ion-content class="color" [fullscreen]="true">
  <ion-app>
    <ion-menu contentId="main-content">
      <ion-header>
        <ion-toolbar color="light">
          <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
          </ion-buttons>
          <ion-title>SuperPrice</ion-title>
          <ion-icon name="fast-food" color="icon-color" size="large" slot="end" style="padding: 9px;"></ion-icon>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-list [inset]="true" style="background-color: #ffffff !important;" >
          <ion-item class="text-color border-color mg-button"   tab="home" lines="none" routerDirection="root" routerLink="/home">
            <ion-icon name="home" color="icon-color" slot="start" size="large"></ion-icon>
            <ion-label class="text-family">Home</ion-label>
          </ion-item>
          <ion-item class="text-color border-color mg-button"  tab="buscador" lines="none" routerDirection="root" routerLink="/buscador">
            <ion-icon name="search-circle" color="icon-color" slot="start" size="large"></ion-icon>
            <ion-label class="text-family">Buscar</ion-label>
          </ion-item>
          <ion-item class="text-color border-color mg-button" tab="cuenta" lines="none" routerDirection="root" routerLink="/cuenta">
            <ion-icon name="person" color="icon-color" slot="start" size="large"></ion-icon>
            <ion-label class="text-family">Mi cuenta</ion-label>
          </ion-item>
          <ion-item class="text-color border-color mg-button"  tab="carrito" lines="none" routerDirection="root" routerLink="/carrito">
            <ion-icon name="cart" color="icon-color" slot="start" size="large"></ion-icon>
            <ion-label class="text-family">Mi Carrito</ion-label>
          </ion-item>
          <ion-item class="text-color border-color mg-button" tab="ofertas" lines="none" routerDirection="root" routerLink="/ofertas">
            <ion-icon name="trending-down" color="icon-color" slot="start" size="large"></ion-icon>
            <ion-label class="text-family">Ofertas</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-menu>
    <ion-content class="ion-page" id="main-content">
      <ion-header class="ion-no-border">
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
          </ion-buttons>
          <ion-chip [color]="UserStatus ? 'success' : 'danger'"slot="end" tab="carrito" routerDirection="root"  routerLink="/carrito">
            <ion-icon name="cash"  color="icon-color"></ion-icon>
            <ion-label>{{UserStatus}}</ion-label>
          </ion-chip>
          <ion-chip color="success" slot="end" tab="carrito" routerDirection="root"  routerLink="/carrito">
            <ion-icon name="cart"  color="success"></ion-icon>
            <ion-label>Cantidad:{{carritoProductos.length}}</ion-label>
          </ion-chip>
          <ion-chip color="warning" slot="end">
            <ion-icon name="wallet"  color="icon-color"></ion-icon>
            <ion-label>Total: ${{total}}</ion-label>
          </ion-chip>
        </ion-toolbar>

      </ion-header>
      <div class="color flex ion-justify-content-center">
        <img src="../../assets/user-3d-icon_642950-57-removebg-preview.png" alt="Silhouette of user" class="user-image">
      </div>
      <ion-card>
        <ion-card-header>
          <div style="margin: 0;">
            <ion-chip color="tertiary" slot="end">
              <ion-icon name="person-circle"  color="success" size="medium"></ion-icon>
              <ion-label class="text-family text-color">tu información</ion-label><br>
            </ion-chip>
            <div *ngIf="ischip === true">
              <ion-chip color="tertiary" slot="end"  id="open-modal" (click)="setOpenModal(true)">
                <ion-icon name="person-circle"  color="success" size="medium"></ion-icon>
                <ion-label class="text-family text-color">{{isPremium}}</ion-label>
              </ion-chip>
            </div>
            <div *ngIf="ischip === false">
              <ion-chip color="danger" slot="end"  id="open-modal" (click)="setOpenModal(true)">
                <ion-icon name="person-circle"  color="danger" size="medium"></ion-icon>
                <ion-label class="text-family text-color">No eres un usuario premium</ion-label>
              </ion-chip>
            </div>
          </div>
          <br>
          <ion-card-title class="text-user-card ion-margin-bottom" style="margin-top: 0;">{{nombre}} {{apellido}}</ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-padding ion-margin-bottom">
          <div class="ion-margin-bottom">
            <ion-chip color="success" slot="end" tab="carrito" routerDirection="root" routerLink="/carrito">
              <ion-icon name="cart"  color="success" size="medium"></ion-icon>
              <ion-label class="text-family text-color">Cantidad: {{carritoProductos.length}}</ion-label>
            </ion-chip>
            <ion-chip color="warning" slot="end">
              <ion-icon name="wallet"  color="icon-color" size="medium"></ion-icon>
              <ion-label class="text-family text-color">Total: ${{total}}</ion-label>
            </ion-chip>
          </div>
          <hr>
          <ion-card-subtitle class="ion-padding text-color style-text-subtitle"> Mas información de tu cuenta </ion-card-subtitle>
          <ion-card-content class="ion-padding text-content-info">
            Todos los datos de tu cuenta en SuperPrice <br><br>
            <ion-chip color="success" class="ion-margin-bottom">
              <ion-icon name="pin"slot="start" size="medium"></ion-icon>
              <ion-label class="chip-text text-color">Correo: <br> {{email}}</ion-label>
            </ion-chip>
            <ion-chip color="success" class="ion-margin-bottom">
              <ion-icon name="pin" slot="start" size="medium"></ion-icon>
              <ion-label class="chip-text text-color">Nombre: <br> {{nombre}} {{apellido}}</ion-label>
            </ion-chip>
            <hr>
            <ion-card-content class="flex ion-justify-content-between" style="margin-bottom: 30px;">
              <ion-button color="btn-color" class="btn-text" style="margin-left: 2px;" (click)="logOut()">
                <ion-icon name="exit" slot="start"></ion-icon>
                Salir
              </ion-button>
              <ion-button color="btn-color" class="btn-text" tab="carrito" routerDirection="root" routerLink="/carrito"> Ver tu carrito</ion-button>
            </ion-card-content>
          </ion-card-content>
        </ion-card-content>
      </ion-card>

      <ion-modal trigger="open-modal"  [isOpen]="IsModalOpen" [initialBreakpoint]="1" [breakpoints]="[0, 1]">
        <ng-template>
          <div class="block">
            <ion-grid class="ion-padding">
              <ion-row>
                <ion-col size="12" class="ion-text-center">
                  <ion-chip color="success" class="ion-margin-bottom">
                    <ion-icon name="pin" slot="start" size="medium"></ion-icon>
                    <ion-label class="chip-text text-color">{{nombre}} / {{apellido}}</ion-label>
                  </ion-chip>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="12" class="ion-text-center">
                  <p class="text-color text-family" *ngIf="ischip === true">
                    Hola! {{nombre}} {{apellido}}, por ahora eres usuario premium, ¿quieres degradar a usuario común?
                  </p>
                  <p class="text-color text-family" *ngIf="ischip === false">
                    Hola! {{nombre}} {{apellido}}, por ahora eres usuario común, ¿quieres actualizar a usuario premium?
                  </p>
                </ion-col>
              </ion-row>
              <ion-row class="flex ion-justify-content-between">
                <ion-col size="6" *ngIf="ischip === true">
                  <ion-button
                    color="btn-color"
                    expand="block"
                    class="btn-text"
                    (click)="degradarPremiunUser()"
                    >
                    Degradar
                  </ion-button>
                </ion-col>
                <ion-col size="6" *ngIf="ischip === false">
                  <ion-button
                    color="btn-color"
                    expand="block"
                    class="btn-text"
                    (click)="updatePremiunUser()"
                    >
                    Actualizar
                  </ion-button>
                </ion-col>
                <ion-col size="6">
                  <ion-button
                    color="btn-color"
                    expand="block"
                    class="btn-text"
                    (click)="setOpenModal(false)">
                    Cerrar
                  </ion-button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>
        </ng-template>
      </ion-modal>
    </ion-content>
  </ion-app>
</ion-content>